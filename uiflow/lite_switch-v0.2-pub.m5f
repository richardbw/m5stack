{"components":[],"type":"atom","versions":"Beta","units":[],"hats":[],"blockly":"<variables><variable id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</variable><variable id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</variable><variable id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</variable><variable id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><next><block type=\"mqtt_set_client\" id=\"etrqBbho2Jys#`br$2oz\"><mutation SSL=\"True\" key=\"PAm5stik.key\" cert=\"PAm5stik.crt\"></mutation><value name=\"ID\"><shadow type=\"text\" id=\"T^XhV`D_Q*k;issY}KOE\"><field name=\"TEXT\">lite_switch-v0.2-pub</field></shadow></value><value name=\"SERVER\"><shadow type=\"text\" id=\"t|f~*9FVAe,+/ySLvcS7\"><field name=\"TEXT\">a22d4aoxca2zot-ats.iot.us-east-1.amazonaws.com</field></shadow></value><value name=\"PORT\"><shadow type=\"math_number\" id=\"3VKs1D(a0dK`JHzTickA\"><field name=\"NUM\">8883</field></shadow></value><value name=\"USER\"><shadow type=\"text\" id=\"G9nxdlvh!u@ShEex3aM@\"><field name=\"TEXT\"></field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"u$w$9hGflXMw;)^5sN5q\"><field name=\"TEXT\"></field></shadow></value><value name=\"KEEPALIVE\"><shadow type=\"math_slider\" id=\"Wl}V+6ztYSJ:9v%`6-Mh\"><field name=\"NUM\" max=\"65536\" step=\"1\">1000</field></shadow></value><next><block type=\"mqtt_start\" id=\"7YYi![RqqL}SU0=2x:VK\"><next><block type=\"execute\" id=\"8z.)JTE2r1#__el;qvLx\"><field name=\"CODE\">print('---Started MQTT')</field><next><block type=\"variables_set\" id=\"Tr}rFnOA(Ib/T?-$*Uo0\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"da~$)`~Q+jp)d6h_c?Zg\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\" id=\"y%Hv96RpgGe}KytC/~Ip\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"$R.kK|^[LH6y~ftkBcxN\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"variables_set\" id=\"]n1S7}.d,lFGJu-wR3Oi\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"O5FIZD}#li6Qn4NHwR}S\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"pin_pinout\" id=\"Na[kGI)h,_78`/u/GoL|\"><field name=\"PINGS\">pin0</field><field name=\"MODE\">IN</field><field name=\"PULL\">PULL_DOWN</field><value name=\"PIN\"><shadow type=\"math_slider\" id=\"WNooSXA;jU,JMsPhnhSh\"><field name=\"NUM\" max=\"36\" step=\"1\">33</field></shadow></value><next><block type=\"basic_on_loop\" id=\"/RjhMh9?.cF)zTb)aOqx\"><statement name=\"LOOP\"><block type=\"variables_set\" id=\"YUCk30Z|Q3I:7_E-8pWp\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field><value name=\"VALUE\"><block type=\"pin_get_value\" id=\"-4?!!SVR?g[tgRw$$c+t\"><field name=\"PINGS\">pin0</field></block></value><next><block type=\"controls_if\" id=\"Gt)LG`=G*iBo}JERVzND\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"YO4iO.)?Uq4vziymAS4`\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"o4Em~-!?xWXj^+EF5`3j\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\"uDQ{xfm;Po0.j!mm@%Sr\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"K%T$)jO=?K,[FG;?S@G8\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field><value name=\"VALUE\"><block type=\"variables_get\" id=\",I`Tl$80sVW|`RH^hM+o\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"3rYA;?tyddoDj|O(lf]P\"><mutation name=\"publish_state\"><arg name=\"switch_is_closed\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"N;/g%itr~M6+R1u]lI#Y\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value></block></next></block></statement><next><block type=\"procedures_callnoreturn\" id=\"RT5O8$sM/#w~K_}SY[dU\"><mutation name=\"set_led\"><arg name=\"switch_is_closed\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"4uQ?q2ZbSH47IS~}jv1_\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value><next><block type=\"timer_delay_ms\" id=\"e?,*Aw^*@[bHml4V_{zG\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"AV{L-`?0:S9s~8}9F(f-\"><field name=\"NUM\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type=\"button_callback\" id=\"1!pU`=NzwsMcua*b9JWS\" x=\"590\" y=\"130\"><field name=\"BUTTON\">A</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"variables_set\" id=\"vg]{0AyorwK0]iH|9apB\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"r-O|+Y..ES6T1Wu]+-^!\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"FI;N(/h-fdg7qucHGi{!\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value></block></value><next><block type=\"controls_if\" id=\"Jt`*:~e!z?mm;b6.NZ6{\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"~56VA*$n1u[LR?sx2(5}\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"Uvcb$242XILNc;VHjt%4\"><field name=\"COLOR\">#cc33cc</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"xy@LSBeS6nR_*p)bn%o$\"><field name=\"COLOR\">#ff6600</field></block></statement><next><block type=\"timer_delay\" id=\"`h|Wxd$?~M70Ym9N%ypj\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"/YdD^eN}POuTe`xo(ZW.\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"b4p1q7F2JyCw8-}_~.P+\" x=\"590\" y=\"370\"><mutation><arg name=\"switch_is_closed\" varid=\"-ioZiUSWRIN?%?OwJoPp\"></arg></mutation><field name=\"NAME\">set_led</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"(-T@H{X4jK`hJ34?y;4|\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"boS,Uy%J*3U/i_Bf~4V+\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"mOa:akjYX^wldjt]?=:j\"><field name=\"COLOR\">#33cc00</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"6:*1e*TWvSvUS0g#~M?0\"><field name=\"COLOR\">#ff0000</field></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"-MCp$uSH1,Co}@VDQqEi\" x=\"590\" y=\"550\"><mutation><arg name=\"switch_is_closed\" varid=\"-ioZiUSWRIN?%?OwJoPp\"></arg></mutation><field name=\"NAME\">publish_state</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"execute\" id=\"Lknl$-f^;B3S4%jW=f0O\"><field name=\"CODE\">print('---publish_state: '+str(switch_is_closed))</field><next><block type=\"controls_if\" id=\"+Q=pI@9vIv;ZM+axAReG\"><value name=\"IF0\"><block type=\"variables_get\" id=\"X[8^dL}a?*wISIm[,Bk(\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"58eE0%*4W}4adM262oUN\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"YeO}eX#[TW;T~9_(J84D\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"fn_8iQs,gYaX7Z|D3^#S\"><field name=\"COLOR\">#3366ff</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"V1ZoUbK:Lan}koPO3hf?\"><field name=\"COLOR\">#ffff33</field></block></statement><next><block type=\"mqtt_publish\" id=\"G]{R@116j|{}CqVTLP#(\"><value name=\"FROM\"><shadow type=\"text\" id=\"}wOxxRhO/vIB^=!EZTNh\"><field name=\"TEXT\">rbw/switch</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"bYnn+7U/l_=o(,vUX7hW\"><field name=\"TEXT\"></field></shadow><block type=\"dumps_json\" id=\"r=*0ydBtAy~/].p)WPp.\"><value name=\"JSON_VAR\"><block type=\"map_on_loop\" id=\"GaJbk=dj8}wl#7;w:7NM\"><statement name=\"LOOP\"><block type=\"create_map_key\" id=\"Y^9[H@zWWN4DG#}kL[IA\"><value name=\"key\"><block type=\"text\" id=\"FPRn/B8p62HEjXm-q#yx\"><field name=\"TEXT\">switch</field></block></value><value name=\"value\"><block type=\"variables_get\" id=\"HdvXVG;U[,m2xWIX}CN+\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value></block></statement></block></value></block></value><next><block type=\"timer_delay\" id=\"=)bc`[$ff@X-54fX?]vO\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"l2R0{+S7_uFol%IF#K;B\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement></block>","Blockly.Remotes":[],"modules":["machine","rgb"]}