{"components":[{"id":"____screen","createTime":1621175507466,"name":"screen","x":0,"y":0,"width":320,"height":240,"backgroundColor":"#222222","backgroundImage":"","type":"screen"}],"type":"atom","versions":"Beta","units":[],"hats":[],"blockly":"<variables><variable id=\"s7#A=#J#lY%;F!dVRe^v\">mqtt_hostname</variable><variable id=\"UHqXKTsGi`Fl)$CFJ]Y!\">mqtt_topicname</variable><variable id=\"EO4npm+z`!^ZZYDkhv/(\">script_name</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"-90\" y=\"10\"><next><block type=\"rgb_set_all\" id=\"$3w`(:O;=mwL0|R%Mj!j\"><field name=\"COLOR\">#ff0000</field><next><block type=\"text_print\" id=\"re-29E=NxPUU+4$;L5|B\"><value name=\"TEXT\"><block type=\"text\" id=\"]Mnxx@fb;2A-OOX)cNPB\"><field name=\"TEXT\">Starting setup ---------------------------&gt;</field></block></value><next><block type=\"variables_set\" id=\"j}tW*{riJ=W,OjKyI~~;\"><field name=\"VAR\" id=\"s7#A=#J#lY%;F!dVRe^v\">mqtt_hostname</field><value name=\"VALUE\"><block type=\"text\" id=\"4CpY8Fn_{,|dP5IIWXc[\"><field name=\"TEXT\">a22d4aoxca2zot.iot.us-east-1.amazonaws.com</field></block></value><next><block type=\"variables_set\" id=\"N-`!|.@*9Nf3f0a?d9K[\"><field name=\"VAR\" id=\"UHqXKTsGi`Fl)$CFJ]Y!\">mqtt_topicname</field><value name=\"VALUE\"><block type=\"text\" id=\"Xen?z!:CC}r8iz2Joy?!\"><field name=\"TEXT\">rbw/test</field></block></value><next><block type=\"variables_set\" id=\"W8Pr/VXtP9,Uo`W@`O+i\"><field name=\"VAR\" id=\"EO4npm+z`!^ZZYDkhv/(\">script_name</field><value name=\"VALUE\"><block type=\"text\" id=\"Ow5cl3MV33`Dkb,l-P[`\"><field name=\"TEXT\">lite_mqtt-test-0.2</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"TrfX3|#+1[R?Z#xN[tvM\"><mutation name=\"check_wifi\"></mutation><next><block type=\"text_print\" id=\"*M8)mEuMpkReO.`2h|ur\"><value name=\"TEXT\"><block type=\"text\" id=\"GQpX=R?L*tNvpu_9C9iv\"><field name=\"TEXT\">Setting clock time</field></block></value><next><block type=\"ntp_init\" id=\"S-Kd~`A7r2q(1#X?M[.+\"><value name=\"host\"><shadow type=\"text\" id=\"QsDj?p3sVy?sVrY-pV#l\"><field name=\"TEXT\">uk.pool.ntp.org</field></shadow></value><value name=\"timezone\"><shadow type=\"math_number\" id=\"1nXVo8*IB8,O)eyV.6GY\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"text_print\" id=\"pxjI.{ck``|F|(0$*^y)\"><value name=\"TEXT\"><block type=\"text_add\" id=\"R0X*|@0,eb,,}%SbtsG8\"><value name=\"arg0\"><shadow type=\"text\" id=\"5@e$7@:k/mi[#b3kgXW?\" disabled=\"true\"><field name=\"TEXT\"></field></shadow><block type=\"text\" id=\"zl9yRGVIIC%E^:52FMIf\"><field name=\"TEXT\">Time is: </field></block></value><value name=\"arg1\"><block type=\"ntp_get_date_time_format\" id=\"*/K=eEe+1AVfsq@9TI!M\"><value name=\"date\"><shadow type=\"text\" id=\"I02IS2m`7IP4HClsuWiq\"><field name=\"TEXT\">-</field></shadow></value><value name=\"time\"><shadow type=\"text\" id=\"d%za;iG#=G4xd4d9K0R7\"><field name=\"TEXT\">:</field></shadow></value></block></value></block></value><next><block type=\"text_print\" id=\"L0G64OtjlZ{:V7g?`N;p\"><value name=\"TEXT\"><block type=\"text\" id=\"HrJ-kbZ#O;;omK8?r97B\"><field name=\"TEXT\">Setting AWS up mqtt</field></block></value><next><block type=\"aws_init\" id=\"~VEJ6oG?sRs6;=[EPu;A\"><mutation key=\"atomlite01.key\" cert=\"atomlite01.crt\"></mutation><value name=\"things_name\"><shadow type=\"text\" id=\"h]yc!Cmq3?:/Ms-)#T7c\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"Y`k-k7*av]TbFpU{fE#E\"><field name=\"VAR\" id=\"EO4npm+z`!^ZZYDkhv/(\">script_name</field></block></value><value name=\"host\"><shadow type=\"text\" id=\"ERB-D^e@~OozHB+vU,`B\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"d{j~#FQVnQV]V{(re}.X\"><field name=\"VAR\" id=\"s7#A=#J#lY%;F!dVRe^v\">mqtt_hostname</field></block></value><value name=\"port\"><shadow type=\"math_number\" id=\"%g-1O3S5(FxgaFNr*!o4\"><field name=\"NUM\">8883</field></shadow></value><value name=\"keepalive\"><shadow type=\"math_number\" id=\";S7,ss7s5n=1V]^:!ax7\"><field name=\"NUM\">10000</field></shadow></value><next><block type=\"aws_start\" id=\"aM`9bO~;Z!jn?V]mFYRd\"><next><block type=\"text_print\" id=\"z?3|/VdiW6/aSfz7r!ha\"><value name=\"TEXT\"><block type=\"text\" id=\"Y?tseu1Ig}Yef-asN?pf\"><field name=\"TEXT\">AWS mqtt started</field></block></value><next><block type=\"text_print\" id=\"W[Z.FlD9u,kSV%;gb=Hh\"><value name=\"TEXT\"><block type=\"text\" id=\"!z+779N;eclA,0mzvpJ!\"><field name=\"TEXT\">Setup complete --------------------------&lt;</field></block></value><next><block type=\"rgb_set_all\" id=\"]%B}E#*w7C?v,dTD4vqH\"><field name=\"COLOR\">#33ff33</field></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type=\"button_callback\" id=\"RQ*=/2s?YiX2Utd9ezTc\" x=\"410\" y=\"150\"><field name=\"BUTTON\">A</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"rgb_set_all\" id=\"f[R*fjIKe}W13W3]yO-p\"><field name=\"COLOR\">#3333ff</field><next><block type=\"procedures_callnoreturn\" id=\"lQ?r2zoHkhoVS%tWPxpf\"><mutation name=\"check_wifi\"></mutation><next><block type=\"text_print\" id=\"mnhw1zW=Ts~OixG{/xI;\"><value name=\"TEXT\"><block type=\"text_add\" id=\"3wNhm@N^,[$_iE_sk7+/\"><value name=\"arg0\"><shadow type=\"text\" disabled=\"true\"><field name=\"TEXT\"></field></shadow><block type=\"text\" id=\"c*o!M,*e]O]UYlp2wOrj\"><field name=\"TEXT\">Publishing to: </field></block></value><value name=\"arg1\"><block type=\"text_add\" id=\"4d-1/5]8jXE$Lra_3L7D\"><value name=\"arg0\"><shadow type=\"text\" disabled=\"true\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"=43cx[tp?}Dl`.O;x(L4\"><field name=\"VAR\" id=\"s7#A=#J#lY%;F!dVRe^v\">mqtt_hostname</field></block></value><value name=\"arg1\"><block type=\"text_add\" id=\"%a`3%1m?]KW=:L;Yv-;2\"><value name=\"arg0\"><shadow type=\"text\" disabled=\"true\"><field name=\"TEXT\"></field></shadow><block type=\"text\" id=\"Bqs%ly7-m}L,vJkBg_]9\"><field name=\"TEXT\">&gt; </field></block></value><value name=\"arg1\"><block type=\"variables_get\" id=\"![awd(nh#H8(~LK@Sj``\"><field name=\"VAR\" id=\"UHqXKTsGi`Fl)$CFJ]Y!\">mqtt_topicname</field></block></value></block></value></block></value></block></value><next><block type=\"aws_publish\" id=\"{OlU#U*d/N|Q)x!8vxc6\"><value name=\"FROM\"><shadow type=\"text\" id=\"Cwouq)$e]-=j[W=RIM)B\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\" id=\"N*]*j^MvDfg:s0ez`AZo\"><field name=\"VAR\" id=\"UHqXKTsGi`Fl)$CFJ]Y!\">mqtt_topicname</field></block></value><value name=\"MSG\"><shadow type=\"text\" id=\"DMS$0brxc@pmA)(7,a-H\"><field name=\"TEXT\"></field></shadow><block type=\"dumps_json\" id=\"0Uga%R7TB_s3=6h$A]0_\"><value name=\"JSON_VAR\"><block type=\"map_on_loop\" id=\"v-,hCFBDK8A,4q@q$1VM\"><statement name=\"LOOP\"><block type=\"create_map_key\" id=\"NdEtRqT:@/JB*bk9zmI3\"><value name=\"key\"><block type=\"text\" id=\"q7sVM(~w%Jiuh#%vc7Gq\"><field name=\"TEXT\">time</field></block></value><value name=\"value\"><block type=\"ntp_get_date_time_format\" id=\"vEc}TH_c:7cUL^rwd,.p\"><value name=\"date\"><shadow type=\"text\" id=\"BEHjoB=?q2#$tuF*r8+;\"><field name=\"TEXT\">-</field></shadow></value><value name=\"time\"><shadow type=\"text\" id=\".8mTG!#5%c_e-+,MK!vK\"><field name=\"TEXT\">:</field></shadow></value></block></value><next><block type=\"create_map_key\" id=\"L8)1[^:z13l.Ta@}8V@5\"><value name=\"key\"><block type=\"text\" id=\"a5l(jFi!YnrkUUgN%Uq$\"><field name=\"TEXT\">topic</field></block></value><value name=\"value\"><block type=\"variables_get\" id=\"=C-@L38f2!?YS]F-yahf\"><field name=\"VAR\" id=\"UHqXKTsGi`Fl)$CFJ]Y!\">mqtt_topicname</field></block></value><next><block type=\"create_map_key\" id=\"fA3H~/p7~dd72AgLgH0:\"><value name=\"key\"><block type=\"text\" id=\"xg!@cQ$]3_P)ayZ,.Cd[\"><field name=\"TEXT\">hostname</field></block></value><value name=\"value\"><block type=\"variables_get\" id=\"w(M`_19ym~nxghY3b!Rv\"><field name=\"VAR\" id=\"s7#A=#J#lY%;F!dVRe^v\">mqtt_hostname</field></block></value><next><block type=\"create_map_key\" id=\"^@!0_^.vXMT7G6XA0(TL\"><value name=\"key\"><block type=\"text\" id=\"27cyM};S@ZlZW]HE{[;4\"><field name=\"TEXT\">script</field></block></value><value name=\"value\"><block type=\"variables_get\" id=\",t[hzL@)44}gpy.c-K}j\"><field name=\"VAR\" id=\"EO4npm+z`!^ZZYDkhv/(\">script_name</field></block></value></block></next></block></next></block></next></block></statement></block></value></block></value><next><block type=\"text_print\" id=\"Jc_N736UwcEk+:Vp|T3w\"><value name=\"TEXT\"><block type=\"text\" id=\"qXd@;YUz3r@z^GP9SfIh\"><field name=\"TEXT\">Published.</field></block></value><next><block type=\"timer_delay_ms\" id=\"@?jFwqOm4Ob9::e[P,Wm\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"Q}xu4K+osh(y1~_m_Wvz\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"rgb_set_all\" id=\"H##~:$/tUS~y/.LYUmN;\"><field name=\"COLOR\">#33cc00</field></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"XBgWC]P`hCQmVn)x;-,6\" x=\"290\" y=\"690\"><field name=\"NAME\">check_wifi</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"%K;{QjCcK*taJPX:Fv2z\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"wifi_isconnect\" id=\"Rt:HM}M}}bkSQ{J!lb1/\"></block></value><statement name=\"DO0\"><block type=\"text_print\" id=\"Nr{G.9L;m^U`)BA1k)jD\"><value name=\"TEXT\"><block type=\"text\" id=\"DOB#FMJqZ-TmJ;h@#IF2\"><field name=\"TEXT\">Wifi is connected</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"text_print\" id=\"vpXgF5,P5yOa4cRg`Kyb\"><value name=\"TEXT\"><block type=\"text\" id=\"Yg%81Y$^IkX_i*(R/nmQ\"><field name=\"TEXT\">Wifi is NOT connected.. reconnecting</field></block></value></block></statement><next><block type=\"controls_whileUntil\" id=\"%AOs$Ct*?E`t%FT6T!*I\"><field name=\"MODE\">WHILE</field><value name=\"BOOL\"><block type=\"logic_negate\" id=\"/b#zHot:EZq4v?B:ItVx\"><value name=\"BOOL\"><block type=\"wifi_isconnect\" id=\"Z@oDZQ3|r)QUNgMWmt~m\"></block></value></block></value><statement name=\"DO\"><block type=\"text_print\" id=\"-q~YI*eSjvpkt)HlU}JD\"><value name=\"TEXT\"><block type=\"text\" id=\"zasA-[Vu{%)Es7.}M,z%\"><field name=\"TEXT\">connecting</field></block></value><next><block type=\"timer_delay_ms\" id=\"P:_[8@t3R@Xzx6;X*JMz\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"kyS*Qf_DKU8{e^[;x6o;\"><field name=\"NUM\">500</field></shadow></value><next><block type=\"wifi_doConnect\" id=\"3b?YN-@=J:bQe8[$#UED\"><value name=\"apiKey\"><shadow type=\"text\" id=\"w7aUiTg{!NcU{wG|n}rr\"><field name=\"TEXT\">The Promised LAN</field></shadow></value><value name=\"Msg\"><shadow type=\"text\" id=\"p:TfIYzkr1e4`d|Obh2G\"><field name=\"TEXT\">HAx3WwpVfLe4</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement></block>","Blockly.Remotes":[],"modules":["machine","rgb"]}