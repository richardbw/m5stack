{"components":[{"id":"____screen","createTime":1615327028961,"name":"screen","x":0,"y":0,"width":320,"height":240,"backgroundColor":"#222222","backgroundImage":"","type":"screen"}],"type":"atom","versions":"Beta","units":[],"hats":[],"blockly":"<variables><variable id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</variable><variable id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</variable><variable id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</variable><variable id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><next><block type=\"rgb_set_dir_rgb\" id=\".{^.T@~D+|z=bahY,Myb\"><field name=\"DIR\">left</field><value name=\"R\"><shadow type=\"math_slider\" id=\"9L]5x2;RWF_!bxOeIqP5\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"mPhiuMfK$dM=xhf(M*o5\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"eEE~z25~-h=;p;_$F`R]\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><next><block type=\"rgb_set_dir_rgb\" id=\"NJvd!^/4iSch|tjy1ks/\"><field name=\"DIR\">right</field><value name=\"R\"><shadow type=\"math_slider\" id=\"*_2k.mY0Hl]-#Q/?]6Cj\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"`frT:_QLs76~RA?i/p$M\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"ls:+~^*6lK4_aaTA$Kuv\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><next><block type=\"mqtt_set_client\" id=\"etrqBbho2Jys#`br$2oz\"><mutation SSL=\"True\" key=\"rbwkey.pem\" cert=\"rbwcert.pem\"></mutation><value name=\"ID\"><shadow type=\"text\" id=\"T^XhV`D_Q*k;issY}KOE\"><field name=\"TEXT\">lite_switch-v0.2-pub</field></shadow></value><value name=\"SERVER\"><shadow type=\"text\" id=\"t|f~*9FVAe,+/ySLvcS7\"><field name=\"TEXT\">a22d4aoxca2zot-ats.iot.us-east-1.amazonaws.com</field></shadow></value><value name=\"PORT\"><shadow type=\"math_number\" id=\"3VKs1D(a0dK`JHzTickA\"><field name=\"NUM\">8883</field></shadow></value><value name=\"USER\"><shadow type=\"text\" id=\"G9nxdlvh!u@ShEex3aM@\"><field name=\"TEXT\"></field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"u$w$9hGflXMw;)^5sN5q\"><field name=\"TEXT\"></field></shadow></value><value name=\"KEEPALIVE\"><shadow type=\"math_slider\" id=\"Wl}V+6ztYSJ:9v%`6-Mh\"><field name=\"NUM\" max=\"65536\" step=\"1\">1000</field></shadow></value><next><block type=\"mqtt_start\" id=\"7YYi![RqqL}SU0=2x:VK\"><next><block type=\"rgb_set_dir_rgb\" id=\"6e.QQ:(t,==!-{h:Vf`f\"><field name=\"DIR\">left</field><value name=\"R\"><shadow type=\"math_slider\" id=\"B]5c[;?YHKpYJ,j8wuhh\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"q#NWB|s$%Wt1mE8xwWwb\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"Ve/y(x(!(h[l#gWlyYw{\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><next><block type=\"rgb_set_dir_rgb\" id=\"_{C5{f_6?O9$mX{pjx|E\"><field name=\"DIR\">right</field><value name=\"R\"><shadow type=\"math_slider\" id=\"DyQ1di|TaA%1zTOBt`L4\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"D9at~oW%!8Ggr`|_:PR3\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"x~k:Moy7xDpU*DV^+(:#\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><next><block type=\"execute\" id=\"8z.)JTE2r1#__el;qvLx\"><field name=\"CODE\">print('---Started MQTT')</field><next><block type=\"ntp_init\" id=\"_h2Vq~8y^KP5xCd%DHpT\"><value name=\"host\"><shadow type=\"text\" id=\"*9@O]AC_i_poBA(7,pE3\"><field name=\"TEXT\">uk.pool.ntp.org</field></shadow></value><value name=\"timezone\"><shadow type=\"math_number\" id=\"?2DgjE,I;*#vw]eSo4]N\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"execute\" id=\"B$aY2;~1ihd43=0|XV#5\"><field name=\"CODE\">print('---Initialised nntp')</field><next><block type=\"rgb_set_dir_rgb\" id=\"E6L)03))Jds(XO4o,uzc\"><field name=\"DIR\">left</field><value name=\"R\"><shadow type=\"math_slider\" id=\"TU?px(i`pz2:(LgxFHO-\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"tEdWJ6p,FyVJQZRB*;NO\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"j7|WblEc2~Q47+j6i66L\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><next><block type=\"rgb_set_dir_rgb\" id=\"rshnk4%%a-+j|iP*l~P1\"><field name=\"DIR\">right</field><value name=\"R\"><shadow type=\"math_slider\" id=\"[GPp}m0w~mwI`5g!eM/`\"><field name=\"NUM\" max=\"255\" step=\"1\">255</field></shadow></value><value name=\"G\"><shadow type=\"math_slider\" id=\"5BTCGK,Mv2MmzQi}LyN-\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_slider\" id=\"V;;N+IoZ|7$.jLp9tthD\"><field name=\"NUM\" max=\"255\" step=\"1\">0</field></shadow></value><next><block type=\"variables_set\" id=\"Tr}rFnOA(Ib/T?-$*Uo0\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"da~$)`~Q+jp)d6h_c?Zg\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\" id=\"y%Hv96RpgGe}KytC/~Ip\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"$R.kK|^[LH6y~ftkBcxN\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"variables_set\" id=\"]n1S7}.d,lFGJu-wR3Oi\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"O5FIZD}#li6Qn4NHwR}S\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"pin_pinout\" id=\"Na[kGI)h,_78`/u/GoL|\"><field name=\"PINGS\">pin0</field><field name=\"MODE\">IN</field><field name=\"PULL\">PULL_DOWN</field><value name=\"PIN\"><shadow type=\"math_slider\" id=\"WNooSXA;jU,JMsPhnhSh\"><field name=\"NUM\" max=\"36\" step=\"1\">22</field></shadow></value><next><block type=\"basic_on_loop\" id=\"/RjhMh9?.cF)zTb)aOqx\"><statement name=\"LOOP\"><block type=\"variables_set\" id=\"YUCk30Z|Q3I:7_E-8pWp\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field><value name=\"VALUE\"><block type=\"pin_get_value\" id=\"-4?!!SVR?g[tgRw$$c+t\"><field name=\"PINGS\">pin0</field></block></value><next><block type=\"controls_if\" id=\"Gt)LG`=G*iBo}JERVzND\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"YO4iO.)?Uq4vziymAS4`\"><field name=\"OP\">NEQ</field><value name=\"A\"><block type=\"variables_get\" id=\"o4Em~-!?xWXj^+EF5`3j\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field></block></value><value name=\"B\"><block type=\"variables_get\" id=\"uDQ{xfm;Po0.j!mm@%Sr\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"K%T$)jO=?K,[FG;?S@G8\"><field name=\"VAR\" id=\"psuBlo3k%E|Wwt-#5vr:\">previous_state</field><value name=\"VALUE\"><block type=\"variables_get\" id=\",I`Tl$80sVW|`RH^hM+o\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"3rYA;?tyddoDj|O(lf]P\"><mutation name=\"publish_state\"><arg name=\"switch_is_closed\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"N;/g%itr~M6+R1u]lI#Y\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value></block></next></block></statement><next><block type=\"procedures_callnoreturn\" id=\"RT5O8$sM/#w~K_}SY[dU\"><mutation name=\"set_led\"><arg name=\"switch_is_closed\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"4uQ?q2ZbSH47IS~}jv1_\"><field name=\"VAR\" id=\"}3X5Rl$9~=/^*~7jJ]R!\">current_state</field></block></value><next><block type=\"timer_delay_ms\" id=\"e?,*Aw^*@[bHml4V_{zG\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"AV{L-`?0:S9s~8}9F(f-\"><field name=\"NUM\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block><block type=\"button_callback\" id=\"1!pU`=NzwsMcua*b9JWS\" x=\"610\" y=\"30\"><field name=\"BUTTON\">A</field><field name=\"EVENT\">wasPressed</field><statement name=\"FUNC\"><block type=\"variables_set\" id=\"vg]{0AyorwK0]iH|9apB\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field><value name=\"VALUE\"><block type=\"logic_negate\" id=\"r-O|+Y..ES6T1Wu]+-^!\"><value name=\"BOOL\"><block type=\"variables_get\" id=\"FI;N(/h-fdg7qucHGi{!\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value></block></value><next><block type=\"controls_if\" id=\"Jt`*:~e!z?mm;b6.NZ6{\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"~56VA*$n1u[LR?sx2(5}\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"Uvcb$242XILNc;VHjt%4\"><field name=\"COLOR\">#cc33cc</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"xy@LSBeS6nR_*p)bn%o$\"><field name=\"COLOR\">#ff6600</field></block></statement><next><block type=\"timer_delay\" id=\"`h|Wxd$?~M70Ym9N%ypj\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"/YdD^eN}POuTe`xo(ZW.\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"b4p1q7F2JyCw8-}_~.P+\" x=\"610\" y=\"310\"><mutation><arg name=\"switch_is_closed\" varid=\"-ioZiUSWRIN?%?OwJoPp\"></arg></mutation><field name=\"NAME\">set_led</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"controls_if\" id=\"(-T@H{X4jK`hJ34?y;4|\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"boS,Uy%J*3U/i_Bf~4V+\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"mOa:akjYX^wldjt]?=:j\"><field name=\"COLOR\">#33cc00</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"6:*1e*TWvSvUS0g#~M?0\"><field name=\"COLOR\">#ff0000</field></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"-MCp$uSH1,Co}@VDQqEi\" x=\"610\" y=\"510\"><mutation><arg name=\"switch_is_closed\" varid=\"-ioZiUSWRIN?%?OwJoPp\"></arg></mutation><field name=\"NAME\">publish_state</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"execute\" id=\"Lknl$-f^;B3S4%jW=f0O\"><field name=\"CODE\">print('---publish_state: state:'+str(switch_is_closed)+'; publish?:'+str(do_publish))</field><next><block type=\"controls_if\" id=\"+Q=pI@9vIv;ZM+axAReG\"><value name=\"IF0\"><block type=\"variables_get\" id=\"X[8^dL}a?*wISIm[,Bk(\"><field name=\"VAR\" id=\"Q85a~=kBQ$A{s^@E,[sS\">do_publish</field></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"58eE0%*4W}4adM262oUN\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"variables_get\" id=\"YeO}eX#[TW;T~9_(J84D\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value><statement name=\"DO0\"><block type=\"rgb_set_all\" id=\"fn_8iQs,gYaX7Z|D3^#S\"><field name=\"COLOR\">#3366ff</field></block></statement><statement name=\"ELSE\"><block type=\"rgb_set_all\" id=\"V1ZoUbK:Lan}koPO3hf?\"><field name=\"COLOR\">#ffff33</field></block></statement><next><block type=\"mqtt_publish\" id=\"G]{R@116j|{}CqVTLP#(\"><value name=\"FROM\"><shadow type=\"text\" id=\"}wOxxRhO/vIB^=!EZTNh\"><field name=\"TEXT\">rbw/switch</field></shadow></value><value name=\"MSG\"><shadow type=\"text\" id=\"bYnn+7U/l_=o(,vUX7hW\"><field name=\"TEXT\"></field></shadow><block type=\"dumps_json\" id=\"r=*0ydBtAy~/].p)WPp.\"><value name=\"JSON_VAR\"><block type=\"map_on_loop\" id=\"GaJbk=dj8}wl#7;w:7NM\"><statement name=\"LOOP\"><block type=\"create_map_key\" id=\"_bJQn}Jexy#DHM{8cd]k\"><value name=\"key\"><block type=\"text\" id=\"3.5o^|Gi3kKz`!.7EXtR\"><field name=\"TEXT\">timestamp</field></block></value><value name=\"value\"><block type=\"text_add\" id=\"A+OM8K%Jcg#AIM-t)HVu\"><value name=\"arg0\"><shadow type=\"text\" id=\"u,/vG|g+WNr8%El%Exeq\"><field name=\"TEXT\"></field></shadow><block type=\"ntp_get_date_format\" id=\"okr-[sMxD])ePHoJTM{[\"><value name=\"format\"><shadow type=\"text\" id=\"AvbEANg4XOy+2a6cD#h.\"><field name=\"TEXT\">-</field></shadow></value></block></value><value name=\"arg1\"><block type=\"text_add\" id=\".N!S^Q7qkRk^%p2@E.Wg\"><value name=\"arg0\"><shadow type=\"text\" id=\",/u3V;++sc)nnSlKg+XO\"><field name=\"TEXT\"> </field></shadow></value><value name=\"arg1\"><block type=\"ntp_get_time_format\" id=\"XNDzj/I0mUKAY+v;[@{?\"><value name=\"format\"><shadow type=\"text\" id=\"LAlgwrZd6yB%*Xs4,Wf+\"><field name=\"TEXT\">:</field></shadow></value></block></value></block></value></block></value><next><block type=\"create_map_key\" id=\"Y^9[H@zWWN4DG#}kL[IA\"><value name=\"key\"><block type=\"text\" id=\"FPRn/B8p62HEjXm-q#yx\"><field name=\"TEXT\">switch</field></block></value><value name=\"value\"><block type=\"variables_get\" id=\"HdvXVG;U[,m2xWIX}CN+\"><field name=\"VAR\" id=\"-ioZiUSWRIN?%?OwJoPp\">switch_is_closed</field></block></value></block></next></block></statement></block></value></block></value><next><block type=\"timer_delay\" id=\"=)bc`[$ff@X-54fX?]vO\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"l2R0{+S7_uFol%IF#K;B\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement></block>","Blockly.Remotes":[],"modules":["machine","rgb"]}